<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SPEEDO User App</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&family=Noto+Sans+Sinhala:wght@400;600&family=Hind+Madurai:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --primary: #E31C25; /* Red Theme */
            --primary-dark: #b9151c;
            --bg: #ffffff;
            --text: #333333;
            --gray: #f4f4f4;
            --border: #ddd;
            --error: #d32f2f;
            
            --font-poppins: 'Poppins', sans-serif;
            --font-inter: 'Inter', sans-serif;
            --font-sinhala: 'Noto Sans Sinhala', sans-serif;
            --font-tamil: 'Hind Madurai', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        /* FIX: STRICT NO SCROLL LAYOUT */
        body {
            font-family: var(--font-inter);
            background: var(--bg);
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* STRICTLY NO SCROLL ON BODY */
            color: var(--text);
            display: flex;
            flex-direction: column;
        }

        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-in forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- SPLASH SCREEN --- */
        #splash-screen {
            position: fixed; inset: 0; background: white; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
        }
        #splash-logo { width: 50%; max-width: 180px; object-fit: contain; }

        /* --- LOGIN SCREEN --- */
        #login-screen { 
            width: 100%; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
            overflow: hidden;
        }
        
        /* IMAGE CONTAINER */
        .top-img-container { 
            flex: 1; /* Takes remaining space */
            width: 100%; 
            overflow: hidden; 
            position: relative;
            min-height: 40vh; 
            z-index: 1;
        }
        .top-img { width: 100%; height: 100%; object-fit: cover; }

        /* BOTTOM FLOATING CARD */
        .bottom-card {
            width: 100%;
            height: auto; 
            max-height: 55vh; 
            background: white; 
            border-radius: 30px 30px 0 0; 
            padding: 24px; 
            z-index: 10;
            display: flex;
            flex-direction: column;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            overflow-y: auto; /* Internal scroll only if content overflows on tiny screens */
        }
        
        .input-group { display: flex; border: 2px solid var(--border); border-radius: 12px; overflow: hidden; margin-bottom: 15px; background: white; }
        .input-group:focus-within { border-color: var(--primary); }
        .prefix { background: var(--gray); padding: 12px; font-weight: 600; border-right: 1px solid var(--border); display: flex; align-items: center; font-size: 14px; }
        input[type="tel"], input[type="text"], input[type="email"] {
            flex: 1; border: none; padding: 12px; outline: none; font-family: var(--font-poppins); font-size: 15px;
        }
        
        .btn-primary {
            width: 100%; padding: 14px; background: var(--primary); color: white;
            border: none; border-radius: 12px; font-weight: 600; font-family: var(--font-poppins);
            cursor: pointer; transition: background 0.2s; margin-top: 10px;
        }
        .btn-primary:active { background: var(--primary-dark); }
        .btn-primary:disabled { background: #ffcccc; cursor: not-allowed; }

        .lang-btn {
            width: 100%; padding: 14px; border: 2px solid var(--border); border-radius: 12px;
            background: white; font-weight: 600; font-family: var(--font-poppins); margin-bottom: 10px;
            color: #333; cursor: pointer;
        }

        .new-user-text {
            font-size: 12px; color: #666; text-align: center; margin-top: 8px; margin-bottom: 8px; line-height: 1.4;
        }

        /* --- OTP INPUTS (FIXED VISIBILITY) --- */
        .otp-container {
            display: flex;
            justify-content: center;
            gap: 10px; /* Spacing between boxes */
            width: 100%;
            margin-bottom: 20px;
        }
        .otp-box { 
            width: 60px; 
            height: 65px; 
            text-align: center; 
            font-size: 28px; /* Larger Font */
            font-weight: 700;
            /* VISIBLE OUTLINE STYLES */
            border: 2px solid #ccc; /* Gray Outline */
            border-radius: 12px;
            outline: none; 
            background-color: #ffffff; /* White Background */
            color: #000; /* Black Text */
            /* Add subtle depth so box is distinct from background */
            box-shadow: inset 1px 1px 3px rgba(0,0,0,0.05);
            transition: border-color 0.2s;
        }
        
        /* Hide default spinners on mobile that break the outline */
        .otp-box::-webkit-outer-spin-button,
        .otp-box::-webkit-inner-spin-button,
        .otp-box::-webkit-calendar-picker-indicator {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Focus State - Red Border */
        .otp-box:focus {
            border-color: var(--primary); /* Red Outline */
            box-shadow: inset 1px 1px 3px rgba(227, 28, 37, 0.1);
        }

        /* --- REGISTRATION SCREEN --- */
        #reg-screen {
            position: fixed; inset: 0; background: white; z-index: 100;
            display: flex; flex-direction: column; height: 100vh; overflow: hidden;
        }
        .progress-container { width: 100%; height: 6px; background: #eee; flex-shrink: 0; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s ease; }

        .carousel-container { flex: 1; position: relative; overflow: hidden; width: 100%; }
        .carousel-track { display: flex; height: 100%; width: 500%; transition: transform 0.4s ease-in-out; }
        .slide { min-width: 20%; height: 100%; padding: 24px; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow-y: auto;}

        h2 { font-family: var(--font-poppins); margin-bottom: 20px; color: var(--primary); text-align: center; font-size: 22px;}
        
        .field-group { width: 100%; margin-bottom: 15px; text-align: left; }
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #555; }
        select { width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 12px; font-family: var(--font-inter); outline: none; background: white; }
        .warning-text { font-size: 11px; color: var(--error); margin-top: 5px; display: flex; align-items: center; gap: 4px; }

        /* Camera */
        .profile-preview {
            width: 120px; height: 120px; border-radius: 50%; background: var(--gray);
            border: 4px solid var(--primary); display: flex; justify-content: center; align-items: center;
            margin-bottom: 20px; overflow: hidden; cursor: pointer; position: relative;
        }
        .profile-preview img { width: 100%; height: 100%; object-fit: cover; }
        .profile-preview span { font-size: 12px; color: #888; text-align: center; padding: 10px; }
        
        .camera-popup { position: fixed; inset: 0; background: black; z-index: 200; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .camera-wrapper { position: relative; width: 100%; height: 70vh; display: flex; justify-content: center; align-items: center; }
        video { width: 100%; height: 100%; object-fit: cover; }
        .oval-overlay { position: absolute; width: 250px; height: 320px; border: 2px solid rgba(255,255,255,0.8); border-radius: 50%; box-shadow: 0 0 0 9999px rgba(0,0,0,0.5); pointer-events: none; }
        .camera-instructions { position: absolute; top: 20px; color: white; font-size: 13px; text-align: center; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 20px; width: 90%; line-height: 1.4; }
        .capture-btn { width: 70px; height: 70px; border-radius: 50%; border: 4px solid white; background: transparent; margin-top: 20px; cursor: pointer; position: relative; }
        .capture-btn::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 55px; height: 55px; background: white; border-radius: 50%; }

        /* Slider */
        .slide-agree-container { width: 100%; margin-top: 20px; }
        .slider-track { width: 100%; height: 56px; background: #eee; border-radius: 28px; position: relative; overflow: hidden; display: flex; align-items: center; padding-left: 15px; }
        .slider-text { color: #999; font-size: 14px; font-weight: 600; pointer-events: none; width: 100%; text-align: center; margin-left: 30px;}
        .slider-thumb { width: 46px; height: 46px; background: white; border-radius: 50%; position: absolute; left: 5px; display: flex; justify-content: center; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); cursor: grab; z-index: 2; }
        .slider-thumb i { display: block; width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 10px solid #ccc; }
        .slider-track.unlocked { background: var(--primary); }
        .slider-track.unlocked .slider-text { color: white; }
        .slider-track.unlocked .slider-thumb { left: calc(100% - 51px); background: var(--primary); }

        /* Status & Toast */
        .status-screen { position: fixed; inset: 0; background: white; z-index: 150; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; text-align: center; }
        .status-icon { font-size: 60px; margin-bottom: 20px; }
        #toast-container { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 10000; width: 90%; pointer-events: none; }
        .toast { background: rgba(0,0,0,0.9); color: white; padding: 12px 20px; border-radius: 8px; margin-top: 10px; font-size: 14px; text-align: center; animation: fadeIn 0.3s; }
        .toast.error { background: var(--error); }

        .reason-box {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 13px;
            line-height: 1.5;
            border:1px solid #ffcdd2;
            text-align: left;
            width: 100%;
            max-width: 300px;
        }
    </style>
</head>
<body>

    <!-- SPLASH SCREEN -->
    <div id="splash-screen">
        <img src="https://i.ibb.co/0y4f8HBn/56bfb5ea-125e-4071-a5dc-63762dbddc05.jpg" id="splash-logo">
    </div>

    <!-- STATUS SCREENS (FULLY TRANSLATED) -->
    
    <!-- HELD SCREEN -->
    <div id="status-held-screen" class="status-screen hidden">
        <div class="status-icon">üõë</div>
        <h2 data-i18n="account_on_hold" style="color: #d32f2f;">Account on Hold</h2>
        <p data-i18n="visit_care">Your account is on Hold. Visit our customer care center at speedo.lk for more information.</p>
    </div>

    <!-- PENDING SCREEN -->
    <div id="status-pending-screen" class="status-screen hidden">
        <div class="status-icon">‚è≥</div>
        <h2 data-i18n="account_pending" style="color: #FFA000;">Account Pending</h2>
        <p data-i18n="check_later">Your registration is under review. Please check back later.</p>
    </div>
    
    <!-- DECLINED SCREEN -->
    <div id="status-declined-screen" class="status-screen hidden">
        <div class="status-icon">‚ùå</div>
        <h2 data-i18n="account_declined" style="color: #d32f2f;">Registration Declined</h2>
        <p data-i18n="declined_msg">Your registration request was declined by our admin.</p>
        
        <!-- Reasons Box -->
        <div class="reason-box">
            <strong data-i18n="reasons_label">Reasons:</strong>
            <div id="declined-reasons-display" style="margin-top:5px;">
                <!-- JS will populate this -->
            </div>
        </div>

        <button class="btn-primary" style="margin-top:20px;" onclick="handleTryAgain()" data-i18n="try_again">Try Again</button>
    </div>

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="hidden">
        <div class="top-img-container">
            <img src="https://i.ibb.co/2105w0q7/download.jpg" class="top-img">
        </div>
        <div class="bottom-card">
            
            <!-- Language Selection -->
            <div id="login-lang">
                <h2 data-i18n="select_language" style="margin-bottom:20px;">Select Language</h2>
                <button class="lang-btn" onclick="changeLanguage('English')">English</button>
                <button class="lang-btn font-sinhala" onclick="changeLanguage('Sinhala')">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω</button>
                <button class="lang-btn font-tamil" onclick="changeLanguage('Tamil')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
            </div>

            <!-- Phone Entry -->
            <div id="login-phone" class="hidden fade-in">
                <h2 data-i18n="enter_mobile" style="margin-bottom:15px;">Enter Mobile</h2>
                <div class="input-group">
                    <div class="prefix">+94</div>
                    <input type="tel" id="phone-input" data-i18n-ph="phone_placeholder" placeholder="7X XXX XXXX" maxlength="9" inputmode="numeric">
                </div>
                <p class="new-user-text" data-i18n="new_user_msg">If you are new to Speedo, after verifying your phone you will be redirected to registration.</p>
                <button class="btn-primary" data-i18n="verify_number" onclick="initiateLoginCheck()">Verify Number</button>
            </div>

            <!-- Login OTP -->
            <div id="login-otp" class="hidden fade-in" style="text-align: center;">
                <h2 data-i18n="verification" style="margin-bottom:10px;">Verification</h2>
                <p style="font-size:13px; color:#666; margin-bottom:20px;" id="login-otp-txt">OTP Sent</p>
                
                <div class="otp-container">
                    <input type="tel" class="otp-box" maxlength="1" inputmode="numeric">
                    <input type="tel" class="otp-box" maxlength="1" inputmode="numeric">
                    <input type="tel" class="otp-box" maxlength="1" inputmode="numeric">
                    <input type="tel" class="otp-box" maxlength="1" inputmode="numeric">
                </div>

                <button class="btn-primary" data-i18n="login" onclick="verifyLoginOtp()">Login</button>
                <button class="btn-primary" style="background:transparent; color:#555; border:1px solid #ddd; margin-top:12px;" id="login-resend" data-i18n="resend" onclick="resendLoginOtp()">Resend Code</button>
            </div>
            
            <div style="margin-top:auto; font-size:10px; color:#aaa; text-align:center;" data-i18n="terms_agree">By using SPEEDO you agree to Terms & Conditions.</div>
        </div>
    </div>

    <!-- REGISTRATION SCREEN -->
    <div id="reg-screen" class="hidden">
        <div class="progress-container"><div class="progress-fill" id="reg-progress"></div></div>
        <div class="carousel-container">
            <div class="carousel-track" id="reg-track">
                
                <!-- Slide 1: OTP -->
                <div class="slide">
                    <h2 data-i18n="verify_mobile">Verify Mobile</h2>
                    <p style="font-size:14px; color:#666; margin-bottom:20px;"><span data-i18n="otp_sent_to">We sent a code to</span> <span id="reg-phone-display"></span></p>
                    
                    <div class="otp-container">
                        <input type="tel" class="otp-box" maxlength="1" id="r1" inputmode="numeric">
                        <input type="tel" class="otp-box" maxlength="1" id="r2" inputmode="numeric">
                        <input type="tel" class="otp-box" maxlength="1" id="r3" inputmode="numeric">
                        <input type="tel" class="otp-box" maxlength="1" id="r4" inputmode="numeric">
                    </div>

                    <p id="reg-otp-error" style="color:var(--error); font-size:13px; margin-top:10px; min-height:20px;"></p>
                    <button class="btn-primary" style="background:transparent; color:var(--primary); border:none; margin-top:15px;" onclick="resendRegOtp()" data-i18n="resend">Resend Code</button>
                </div>

                <!-- Slide 2: Name -->
                <div class="slide">
                    <h2 data-i18n="full_name">Full Name</h2>
                    <div class="field-group">
                        <input type="text" id="reg-name" data-i18n-ph="name_placeholder" placeholder="Eg : Name Here" style="text-transform:uppercase;">
                        <div class="warning-text">‚ö† <span data-i18n="name_warning">You cannot edit this after registering!</span></div>
                    </div>
                    <button class="btn-primary" data-i18n="next" onclick="nextSlide(2)">Next</button>
                </div>

                <!-- Slide 3: Details -->
                <div class="slide">
                    <h2 data-i18n="personal_details">Personal Details</h2>
                    <div class="field-group">
                        <label data-i18n="address">Address</label>
                        <input type="text" id="reg-address" data-i18n-ph="addr_placeholder" placeholder="No, Street, City">
                    </div>
                    <div class="field-group" style="display:flex; gap:10px;">
                        <div style="flex:1;"><label data-i18n="province">Province</label><select id="reg-province" onchange="loadDistricts()"></select></div>
                        <div style="flex:1;"><label data-i18n="district">District</label><select id="reg-district"><option value="">Select Province</option></select></div>
                    </div>
                    <div class="field-group">
                        <label data-i18n="nic">NIC Number (Mandatory)</label>
                        <input type="text" id="reg-nic" data-i18n-ph="nic_placeholder" placeholder="Old or New NIC format">
                    </div>
                    <div class="field-group">
                        <label data-i18n="email">Email (Optional)</label>
                        <input type="email" id="reg-email" data-i18n-ph="email_placeholder" placeholder="example@mail.com">
                    </div>
                    <button class="btn-primary" data-i18n="next" onclick="nextSlide(3)">Next</button>
                </div>

                <!-- Slide 4: Image -->
                <div class="slide">
                    <h2 data-i18n="profile_picture">Profile Picture</h2>
                    <div class="profile-preview" id="profile-preview-area" onclick="openCamera()">
                        <span data-i18n="tap_capture">Tap to Capture</span>
                    </div>
                    <button class="btn-primary" data-i18n="next" onclick="nextSlide(4)">Next</button>
                </div>

                <!-- Slide 5: Agree -->
                <div class="slide">
                    <h2 data-i18n="agreement">Agreement</h2>
                    <div style="background:#f9f9f9; padding:15px; border-radius:8px; font-size:12px; height:150px; overflow-y:scroll; margin-bottom:20px; border:1px solid #eee;">
                        <strong data-i18n="terms">Terms and Conditions</strong><br><br>
                        1. <span data-i18n="term1">I agree to provide accurate information.</span><br>
                        2. <span data-i18n="term2">I understand that fake profiles will be banned.</span><br>
                        3. <span data-i18n="term3">SPEEDO reserves right to verify documents.</span><br>
                        4. <span data-i18n="term4">Data will be stored according to privacy laws.</span><br>
                        5. <span data-i18n="term5">Misuse of platform leads to account suspension.</span>
                    </div>
                    <div class="slide-agree-container">
                        <div class="slider-track" id="slider-track">
                            <div class="slider-text" data-i18n="slide_agree">Slide to Agree & Register</div>
                            <div class="slider-thumb" id="slider-thumb"><i></i></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- CAMERA POPUP -->
    <div id="camera-popup" class="camera-popup hidden">
        <div class="camera-instructions" data-i18n="camera_instr">Place your head inside the oval, Do not wear masks, helmets, sunglasses, caps or glasses</div>
        <div class="camera-wrapper">
            <video id="camera-video" autoplay playsinline></video>
            <div class="oval-overlay"></div>
        </div>
        <button class="capture-btn" onclick="captureImage()"></button>
    </div>

    <div id="toast-container"></div>

    <!-- SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, set, get, remove } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAXDoV_y0FKcKz2OdbY6UT5qTpCwkokJqg",
            authDomain: "speedo-a162d.firebaseapp.com",
            databaseURL: "https://speedo-a162d-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "speedo-a162d",
            storageBucket: "speedo-a162d.firebasestorage.app",
            messagingSenderId: "944425759845",
            appId: "1:944425759845:web:f523b6ddbda9216d3c828c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- TRANSLATIONS (Simple, Professional, Colloquial) ---
        const translations = {
            English: {
                select_language: "Select Language",
                enter_mobile: "Enter Mobile",
                phone_placeholder: "7X XXX XXXX",
                new_user_msg: "If you are new to Speedo, after verifying your phone you will be redirected to registration.",
                verify_number: "Verify Number",
                verification: "Verification",
                login: "Login",
                resend: "Resend",
                terms_agree: "By using SPEEDO you agree to Terms & Conditions.",
                
                // Status Translations
                account_on_hold: "Account on Hold",
                visit_care: "Your account is on Hold. Visit our customer care center at speedo.lk for more information.",
                account_pending: "Account Pending",
                check_later: "Your registration is under review. Please check back later.",
                account_declined: "Registration Declined",
                declined_msg: "Your registration request was declined by our admin.",
                reasons_label: "Reasons:",
                try_again: "Try Again",
                
                verify_mobile: "Verify Mobile",
                otp_sent_to: "We sent a code to",
                full_name: "Full Name",
                name_placeholder: "Eg : Name Here",
                name_warning: "You cannot edit this after registering!",
                next: "Next",
                personal_details: "Personal Details",
                address: "Address",
                addr_placeholder: "No, Street, City",
                province: "Province",
                district: "District",
                nic: "NIC Number (Mandatory)",
                nic_placeholder: "Old or New NIC format",
                email: "Email (Optional)",
                email_placeholder: "example@mail.com",
                profile_picture: "Profile Picture",
                tap_capture: "Tap to Capture",
                agreement: "Agreement",
                terms: "Terms and Conditions",
                term1: "I agree to provide accurate information.",
                term2: "I understand that fake profiles will be banned.",
                term3: "SPEEDO reserves right to verify documents.",
                term4: "Data will be stored according to privacy laws.",
                term5: "Misuse of platform leads to account suspension.",
                slide_agree: "Slide to Agree & Register",
                camera_instr: "Place your head inside oval, Do not wear masks, helmets, sunglasses, caps or glasses",
                otp_sent_success: "OTP Sent",
                invalid_otp: "Invalid OTP",
                registration_successful: "Registration Successful!",
                registration_failed: "Registration Failed",
                invalid_number: "Invalid Number"
            },
            Sinhala: {
                select_language: "‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±",
                enter_mobile: "‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂á‡∂≠‡∑î‡∂Ω‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",
                phone_placeholder: "7X XXX XXXX",
                new_user_msg: "Speedo ‡∑Ä‡∑ô‡∂≠ ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂±‡∂∏‡∑ä, ‡∂î‡∂∂‡∂ú‡∑ö ‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∑É‡∂≠‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ô‡∂±‡∑ä ‡∂¥‡∑É‡∑î ‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫‡∂ß ‡∂∫‡∂±‡∑î ‡∂Ω‡∑ê‡∂∂‡∑ö.",
                verify_number: "‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",
                verification: "‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏",
                login: "‡∂¥‡∑í‡∑Ä‡∑í‡∑É‡∑ô‡∂±‡∑ä‡∂±",
                resend: "‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ë‡∑Ä‡∂±‡∑ä‡∂±",
                terms_agree: "SPEEDO ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ô‡∂±‡∑ä ‡∂î‡∂∂ ‡∂ö‡∑ú‡∂±‡∑ä‡∂Ø‡∑ö‡∑É‡∑í ‡∑Ä‡∂Ω‡∂ß ‡∂ë‡∂ö‡∂ü ‡∑Ä‡∑ö.",
                
                // Status Translations (SINHALA)
                account_on_hold: "‡∂ú‡∑í‡∂´‡∑î‡∂∏ ‡∂≠‡∑è‡∑Ä‡∂ö‡∑è‡∂Ω‡∑í‡∂ö‡∑Ä ‡∂±‡∑Ä‡∂≠‡∑è ‡∂á‡∂≠",
                visit_care: "‡∂î‡∂∂‡∑ö ‡∂ú‡∑í‡∂´‡∑î‡∂∏ ‡∂Ö‡∂≠‡∑ä‡∑Ñ‡∑í‡∂ß‡∑î‡∑Ä‡∑è ‡∂á‡∂≠. ‡∂≠‡∑Ä‡∂≠‡∑ä ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª ‡∑É‡∂≥‡∑Ñ‡∑è speedo.lk ‡∑Ñ‡∑í ‡∂Ö‡∂¥‡∂ú‡∑ö ‡∂¥‡∑è‡∂ª‡∑í‡∂∑‡∑ù‡∂ú‡∑í‡∂ö ‡∑É‡∑ö‡∑Ä‡∑è ‡∂∏‡∂∞‡∑ä‚Äç‡∂∫‡∑É‡∑ä‡∂Æ‡∑è‡∂±‡∂∫‡∂ß ‡∂¥‡∑ê‡∂∏‡∑í‡∂´‡∑ô‡∂±‡∑ä‡∂±.",
                account_pending: "‡∂ú‡∑í‡∂´‡∑î‡∂∏ ‡∂¥‡∑Ä‡∂≠‡∑í‡∂∫‡∑í",
                check_later: "‡∂î‡∂∂‡∑ö ‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫ ‡∑É‡∂∏‡∑è‡∂Ω‡∑ù‡∂†‡∂±‡∂∫ ‡∂ö‡∂ª‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂¥‡∑É‡∑î‡∑Ä ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.",
                account_declined: "‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫ ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂ö‡∑ä‡∑Ç‡∑ö‡∂¥ ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì",
                declined_msg: "‡∂î‡∂∂‡∂ú‡∑ö ‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í ‡∂â‡∂Ω‡∑ä‡∂Ω‡∑ì‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂ö‡∑ä‡∑Ç‡∑ö‡∂¥ ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑ì.",
                reasons_label: "‡∑Ñ‡∑ö‡∂≠‡∑ñ‡∂±‡∑ä:",
                try_again: "‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",

                verify_mobile: "‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫ ‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",
                otp_sent_to: "‡∂Ö‡∂¥‡∑í ‡∂ö‡∑ö‡∂≠‡∂∫‡∂ö‡∑ä ‡∂∫‡∑Ä‡∑è ‡∂á‡∂≠",
                full_name: "‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂±‡∂∏",
                name_placeholder: "‡∂ã‡∂Ø‡∑è: ‡∂±‡∂∏ ‡∂∏‡∑ô‡∂≠‡∑ê‡∂±",
                name_warning: "‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ô‡∂±‡∑ä ‡∂¥‡∑É‡∑î ‡∂î‡∂∂‡∂ß ‡∂∏‡∑ô‡∂∫ ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∑Ö ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö!",
                next: "‡∂ä‡∑Ö‡∂ü",
                personal_details: "‡∂¥‡∑û‡∂Ø‡∑ä‡∂ú‡∂Ω‡∑í‡∂ö ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª",
                address: "‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫",
                addr_placeholder: "‡∂±‡∑í‡∑Ä‡∑É‡∑ö ‡∂Ö‡∂Ç‡∂ö‡∂∫, ‡∑Ä‡∑ì‡∂Ø‡∑í‡∂∫, ‡∂±‡∂ú‡∂ª‡∂∫",
                province: "‡∂¥‡∑Ö‡∑è‡∂≠",
                district: "‡∂Ø‡∑í‡∑É‡∑ä‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ä‡∂ö‡∂∫",
                nic: "‡∂¢‡∑è‡∂≠‡∑í‡∂ö ‡∑Ñ‡∑ê‡∂≥‡∑î‡∂±‡∑î‡∂∏‡∑ä‡∂¥‡∂≠‡∑ä ‡∂Ö‡∂Ç‡∂ö‡∂∫ (‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫)",
                nic_placeholder: "‡∂¥‡∂ª‡∂´ ‡∑Ñ‡∑ù ‡∂±‡∑Ä NIC ‡∑É‡∑ä‡∑Ä‡∂ª‡∑ñ‡∂¥‡∂∫",
                email: "‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∂≠‡∑ê‡∂¥‡∑ë‡∂Ω (‡∂Ö‡∂±‡∑í‡∑Ä‡∑è‡∂ª‡∑ä‡∂∫ ‡∂±‡∑ú‡∑Ä‡∑ö)",
                email_placeholder: "example@mail.com",
                profile_picture: "‡∂¥‡∑ä‚Äç‡∂ª‡∑ú‡∑Ü‡∂∫‡∑í‡∂Ω‡∑ä ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫",
                tap_capture: "‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫‡∂ö‡∑ä ‡∂ú‡∂±‡∑ä‡∂±",
                agreement: "‡∂ë‡∂ö‡∂ü‡∂≠‡∑è‡∑Ä‡∂∫",
                terms: "‡∂±‡∑í‡∂∫‡∂∏ ‡∑É‡∑Ñ ‡∂ö‡∑ú‡∂±‡∑ä‡∂Ø‡∑ö‡∑É‡∑í",
                term1: "‡∂∏‡∂∏ ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∑É‡∂¥‡∂∫‡∂± ‡∂∂‡∑Ä‡∂ß ‡∂ë‡∂ö‡∂ü ‡∑Ä‡∑ô‡∂∏‡∑í.",
                term2: "‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¢ ‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∑ä ‡∂≠‡∑Ñ‡∂±‡∂∏‡∑ä ‡∂ö‡∂ª‡∂± ‡∂∂‡∑Ä ‡∂∏‡∂∏ ‡∂Ø‡∂±‡∑í‡∂∏‡∑í.",
                term3: "‡∂Ω‡∑ö‡∂õ‡∂± ‡∑É‡∂≠‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂±‡∂∫ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∂Ö‡∂∫‡∑í‡∂≠‡∑í‡∂∫ SPEEDO ‡∑É‡∂≠‡∑î‡∂∫.",
                term4: "‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂ª‡∑Ñ‡∑É‡∑ä‚Äç‡∂∫‡∂≠‡∑è ‡∂±‡∑ì‡∂≠‡∑í ‡∂Ö‡∂±‡∑î‡∑Ä ‡∂ú‡∂∂‡∂©‡∑è ‡∂ö‡∑ô‡∂ª‡∑ö.",
                term5: "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫ ‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∑ä ‡∂Ö‡∂≠‡∑ä‡∑Ñ‡∑í‡∂ß‡∑î‡∑Ä‡∑ì‡∂∏‡∂ß ‡∑Ñ‡∑ö‡∂≠‡∑î ‡∑Ä‡∑ö.",
                slide_agree: "‡∂ë‡∂ö‡∂ü ‡∑Ä‡∑ì‡∂∏‡∂ß ‡∑É‡∑ä‡∂Ω‡∂∫‡∑í‡∂©‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±",
                camera_instr: "‡∂î‡∂∂‡∑ö ‡∑Ñ‡∑í‡∑É ‡∂ö‡∑ú‡∂ß‡∑î‡∑Ä ‡∂≠‡∑î‡∑Ö ‡∂≠‡∂∂‡∂±‡∑ä‡∂±, ‡∂∏‡∑î‡∂õ‡∑è‡∑Ä‡∂ª‡∂´, ‡∑Ñ‡∑ô‡∂Ω‡∑ä‡∂∏‡∂ß‡∑ä, ‡∂ö‡∂´‡∑ä‡∂±‡∑è‡∂©‡∑í ‡∂±‡∑ú‡∂¥‡∑ê‡∑Ö‡∂≥ ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±",
                otp_sent_success: "OTP ‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø‡∑ì",
                invalid_otp: "‡∑Ä‡∂Ω‡∂Ç‡∂ú‡∑î ‡∂±‡∑ú‡∑Ä‡∂± OTP",
                registration_successful: "‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í!",
                registration_failed: "‡∂Ω‡∑í‡∂∫‡∑è‡∂¥‡∂Ø‡∑í‡∂Ç‡∂†‡∑í‡∂∫ ‡∂Ö‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂∫‡∑í",
                invalid_number: "‡∑Ä‡∂Ω‡∂Ç‡∂ú‡∑î ‡∂±‡∑ú‡∑Ä‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫‡∂ö‡∑í"
            },
            Tamil: {
                select_language: "‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                enter_mobile: "‡ÆÆ‡Øä‡Æ™‡Øà‡Æ≤‡Øç ‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç",
                phone_placeholder: "7X XXX XXXX",
                new_user_msg: "Speedo ‡Æï‡Øç‡Æï‡ØÅ ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ‡Æµ‡Æ∞‡Ææ‡Æï ‡Æá‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡Ææ‡Æ≤‡Øç, ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øä‡Æ≤‡Øà‡Æ™‡Øá‡Æö‡Æø ‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Æ™‡Æø‡Æ±‡Æï‡ØÅ ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø ‡Æµ‡Æø‡Æü‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æµ‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç.",
                verify_number: "‡Æé‡Æ£‡Øç‡Æ£‡Øà ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                verification: "‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡ØÅ",
                login: "‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà‡ÆØ",
                resend: "‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡ØÅ",
                terms_agree: "SPEEDO ‡Æê‡Æ™‡Øç ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡Æ§‡Æ©‡Øç ‡ÆÆ‡ØÇ‡Æ≤‡ÆÆ‡Øç ‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ§‡Æø‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æá‡Æ£‡Æô‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç.",
                
                // Status Translations (TAMIL)
                account_on_hold: "‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ",
                visit_care: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ. ‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æï‡Æµ‡Æ≤‡ØÅ‡Æï‡Øç‡Æï‡ØÅ speedo.lk ‡Æê‡Æ™‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç.",
                account_pending: "‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡Æø‡Æ≤‡ØÅ‡Æµ‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ",
                check_later: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æ™‡Æ∞‡Æø‡Æö‡ØÄ‡Æ≤‡Æ©‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ.",
                account_declined: "‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æ®‡Æø‡Æ∞‡Ææ‡Æï‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ",
                declined_msg: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æï‡Øç‡Æï‡Øã‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Øà ‡Æ®‡Æø‡Æ∞‡Øç‡Æµ‡Ææ‡Æï‡Æ§‡Øç‡Æ§‡Ææ‡Æ≤‡Øç ‡Æ®‡Æø‡Æ∞‡Ææ‡Æï‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.",
                reasons_label: "‡Æï‡Ææ‡Æ∞‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øç:",
                try_again: "‡ÆÆ‡ØÄ‡Æ£‡Øç‡Æü‡ØÅ‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡ÆØ‡Æ±‡Øç‡Æö‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",

                verify_mobile: "‡Æá‡Æ≤‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç",
                otp_sent_to: "‡Æ®‡Ææ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æí‡Æ∞‡ØÅ ‡Æï‡ØÅ‡Æ±‡Æø‡ÆØ‡ØÄ‡Æü‡Øç‡Æü‡Øà ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡ÆØ‡ØÅ‡Æ≥‡Øç‡Æ≥‡Øã‡ÆÆ‡Øç",
                full_name: "‡ÆÆ‡ØÅ‡Æ¥‡ØÅ ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç",
                name_placeholder: "‡Æé‡Æï‡Ææ: ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡Æá‡Æô‡Øç‡Æï‡Øá",
                name_warning: "‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§ ‡Æ™‡Æø‡Æ±‡Æï‡ØÅ ‡Æá‡Æ§‡Øà ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ± ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Ææ‡Æ§‡ØÅ!",
                next: "‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ",
                personal_details: "‡Æ§‡Æ©‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                address: "‡ÆÆ‡ØÅ‡Æï‡Æµ‡Æ∞‡Æø",
                addr_placeholder: "‡Æé‡Æ£‡Øç, ‡Æ§‡ØÜ‡Æ∞‡ØÅ, ‡Æ®‡Æï‡Æ∞‡ÆÆ‡Øç",
                province: "‡ÆÆ‡Ææ‡Æï‡Ææ‡Æ£‡ÆÆ‡Øç",
                district: "‡ÆÆ‡Ææ‡Æµ‡Æü‡Øç‡Æü‡ÆÆ‡Øç",
                nic: "‡Æ§‡Øá‡Æö‡Æø‡ÆØ ‡ÆÖ‡Æü‡Øà‡ÆØ‡Ææ‡Æ≥ ‡ÆÖ‡Æü‡Øç‡Æü‡Øà ‡Æé‡Æ£‡Øç",
                nic_placeholder: "‡Æ™‡Æ¥‡Øà‡ÆØ ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ NIC ‡Æµ‡Æü‡Æø‡Æµ‡ÆÆ‡Øç",
                email: "‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç (‡Æ§‡Øá‡Æµ‡Øà‡ÆØ‡ØÜ‡Æ©‡Æø‡Æ≤‡Øç)",
                email_placeholder: "example@mail.com",
                profile_picture: "‡Æö‡ØÅ‡ÆØ‡Æµ‡Æø‡Æµ‡Æ∞‡Æ™‡Øç ‡Æ™‡Æü‡ÆÆ‡Øç",
                tap_capture: "‡Æ™‡Æü‡ÆÆ‡Øç ‡Æ™‡Æø‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                agreement: "‡Æí‡Æ™‡Øç‡Æ™‡Æ®‡Øç‡Æ§‡ÆÆ‡Øç",
                terms: "‡Æµ‡Æø‡Æ§‡Æø‡ÆÆ‡ØÅ‡Æ±‡Øà‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ™‡Æ®‡Øç‡Æ§‡Æ©‡Øà‡Æï‡Æ≥‡Øç",
                term1: "‡Æö‡Æ∞‡Æø‡ÆØ‡Ææ‡Æ© ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øà ‡Æµ‡Æ¥‡Æô‡Øç‡Æï‡ØÅ‡Æµ‡Æ§‡Ææ‡Æï ‡Æâ‡Æ±‡ØÅ‡Æ§‡Æø‡ÆØ‡Æ≥‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç.",
                term2: "‡Æ™‡Øã‡Æ≤‡Æø ‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øç ‡Æ§‡Æü‡Øà ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç.",
                term3: "‡ÆÜ‡Æµ‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï SPEEDO ‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æ∞‡Æø‡ÆÆ‡Øà ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ.",
                term4: "‡Æ§‡Æ∞‡Æµ‡ØÅ ‡Æö‡Æü‡Øç‡Æü‡Æ™‡Øç‡Æ™‡Æü‡Æø ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ.",
                term5: "‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© ‡Æ™‡ÆØ‡Æ©‡Øç‡Æ™‡Ææ‡Æü‡ØÅ ‡Æï‡Æ£‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡ØÄ‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ ‡Æµ‡Æ¥‡Æø‡Æµ‡Æï‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç.",
                slide_agree: "‡Æè‡Æ±‡Øç‡Æï ‡Æ∏‡Øç‡Æ≤‡Øà‡Æü‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç",
                camera_instr: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Æ≤‡Øà‡ÆØ‡Øà ‡Æµ‡Æü‡Øç‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ‡Æ≥‡Øç ‡Æµ‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æ§‡Øä‡Æ™‡Øç‡Æ™‡Æø, ‡Æï‡Æ£‡Øç‡Æ£‡Ææ‡Æü‡Æø ‡ÆÖ‡Æ£‡Æø‡ÆØ ‡Æµ‡Øá‡Æ£‡Øç‡Æü‡Ææ‡ÆÆ‡Øç.",
                otp_sent_success: "OTP ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ",
                invalid_otp: "‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© OTP",
                registration_successful: "‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ∞‡ÆÆ‡Ææ‡Æï ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ!",
                registration_failed: "‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æ§‡Øã‡Æ≤‡Øç‡Æµ‡Æø‡ÆØ‡Æü‡Øà‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ",
                invalid_number: "‡Æ§‡Æµ‡Æ±‡Ææ‡Æ© ‡Æé‡Æ£‡Øç"
            }
        };

        // Global State
        window.appState = { userPhone: "", loginOtp: null, regOtp: null, capturedImage: null, isCameraOpen: false };
        window.currentLang = 'English';

        // Province Data
        const sriLankaData = {
            "Western": ["Colombo", "Gampaha", "Kalutara"], "Central": ["Kandy", "Matale", "Nuwara Eliya"],
            "Southern": ["Galle", "Matara", "Hambantota"], "Northern": ["Jaffna", "Kilinochchi", "Mannar", "Vavuniya", "Mullaitivu"],
            "Eastern": ["Trincomalee", "Batticaloa", "Ampara"], "North Western": ["Kurunegala", "Puttalam"],
            "North Central": ["Anuradhapura", "Polonnaruwa"], "Uva": ["Badulla", "Monaragala"],
            "Sabaragamuwa": ["Ratnapura", "Kegalle"]
        };

        // --- TRANSLATION FUNCTION ---
        window.changeLanguage = (lang) => {
            window.currentLang = lang;
            const t = translations[lang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(t[key]) el.innerText = t[key];
            });
            document.querySelectorAll('[data-i18n-ph]').forEach(el => {
                const key = el.getAttribute('data-i18n-ph');
                if(t[key]) el.placeholder = t[key];
            });
            document.body.style.fontFamily = (lang === 'Sinhala') ? 'var(--font-sinhala)' : (lang === 'Tamil') ? 'var(--font-tamil)' : 'var(--font-inter)';
            document.getElementById('login-lang').classList.add('hidden');
            document.getElementById('login-phone').classList.remove('hidden');
        };

        // --- INIT ---
        document.addEventListener("DOMContentLoaded", () => {
            initSplash();
            setupInputs();
            setupSlider();
            populateProvinces();
        });

        async function initSplash() {
            const storedUser = localStorage.getItem('speedo_user_id');
            if (storedUser) {
                const userRef = ref(db, 'users/' + storedUser);
                const snap = await get(userRef);
                if (snap.exists()) {
                    const data = snap.val();
                    if (data.status === 'approved') { window.location.href = 'main.html'; return; }
                    else if (data.status === 'held') showStatusScreen('held');
                    else if (data.status === 'pending') showStatusScreen('pending');
                    else if (data.status === 'declined') {
                        showStatusScreen('declined');
                        // Handle Reasons
                        const reasonsDiv = document.getElementById('declined-reasons-display');
                        if(data.reasons) {
                            if(Array.isArray(data.reasons)) {
                                reasonsDiv.innerHTML = data.reasons.map(r => `‚Ä¢ ${r}`).join('<br>');
                            } else {
                                reasonsDiv.innerText = data.reasons;
                            }
                        } else {
                            // Translated fallback if no reasons
                            reasonsDiv.innerText = translations[window.currentLang].no_reasons || "No specific reasons provided.";
                        }
                    }
                } else {
                    // Local storage exists but DB doesn't (User was deleted externally)
                    localStorage.removeItem('speedo_user_id');
                    showLogin();
                }
            } else {
                showLogin();
            }
        }

        function showLogin() {
            setTimeout(() => {
                document.getElementById('splash-screen').classList.add('hidden');
                document.getElementById('login-screen').classList.remove('hidden');
                document.getElementById('login-screen').classList.add('fade-in');
            }, 2000);
        }

        function showStatusScreen(type) {
            document.getElementById('splash-screen').classList.add('hidden');
            if(type === 'held') document.getElementById('status-held-screen').classList.remove('hidden');
            if(type === 'pending') document.getElementById('status-pending-screen').classList.remove('hidden');
            if(type === 'declined') document.getElementById('status-declined-screen').classList.remove('hidden');
        }

        // --- TRY AGAIN LOGIC ---
        window.handleTryAgain = async () => {
            const userId = localStorage.getItem('speedo_user_id');
            if (userId) {
                try {
                    // Delete from Database
                    await remove(ref(db, 'users/' + userId));
                } catch (e) {
                    console.error("Error deleting user:", e);
                }
                // Delete from LocalStorage
                localStorage.removeItem('speedo_user_id');
                localStorage.removeItem('speedo_otp_ts');
            }
            // Reload App to start fresh
            location.reload();
        };

        // --- LOGIN FLOW ---
        window.initiateLoginCheck = async () => {
            const phoneInput = document.getElementById('phone-input');
            let num = phoneInput.value.trim();
            if(num.startsWith('0')) num = num.substring(1);
            
            if(!/^[7]\d{8}$/.test(num)) { showToast(translations[window.currentLang].invalid_number); return; }
            
            window.appState.userPhone = "+94" + num;
            
            try {
                // DIRECT LOOKUP TO AVOID INDEX ERROR
                const snap = await get(ref(db, 'users/' + window.appState.userPhone));
                
                if(snap.exists()) {
                    window.appState.loginOtp = Math.floor(1000 + Math.random()*9000).toString();
                    sendSms(window.appState.userPhone.replace('+',''), window.appState.loginOtp);
                    
                    document.getElementById('login-phone').classList.add('hidden');
                    document.getElementById('login-otp').classList.remove('hidden');
                } else {
                    startRegistration();
                }
            } catch (error) {
                console.error(error);
                showToast(translations[window.currentLang].registration_failed);
            }
        };

        window.verifyLoginOtp = () => {
            const inputs = document.querySelectorAll('#login-otp .otp-box');
            let code = ""; inputs.forEach(i => code += i.value);
            if(code === window.appState.loginOtp) {
                localStorage.setItem('speedo_user_id', window.appState.userPhone);
                window.location.href = 'main.html';
            } else {
                showToast(translations[window.currentLang].invalid_otp);
            }
        };

        // --- REGISTRATION FLOW ---
        function startRegistration() {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('reg-screen').classList.remove('hidden');
            document.getElementById('reg-phone-display').innerText = window.appState.userPhone;
            window.appState.regOtp = Math.floor(1000 + Math.random()*9000).toString();
            sendSms(window.appState.userPhone.replace('+',''), window.appState.regOtp);
            setupRegOtpInputs();
        }

        function setupRegOtpInputs() {
            const inputs = [document.getElementById('r1'), document.getElementById('r2'), document.getElementById('r3'), document.getElementById('r4')];
            inputs.forEach((inp, idx) => {
                inp.value = "";
                inp.addEventListener('input', (e) => {
                    if(e.target.value.length === 1 && idx < 3) inputs[idx+1].focus();
                    if(idx === 3 && e.target.value.length === 1) {
                        const full = inputs.map(i=>i.value).join('');
                        if(full === window.appState.regOtp) {
                            document.getElementById('reg-otp-error').innerText = "";
                            nextSlide(1);
                        } else {
                            document.getElementById('reg-otp-error').innerText = translations[window.currentLang].invalid_otp;
                        }
                    }
                });
            });
        }

        window.nextSlide = (index) => {
            if(index === 2 && !document.getElementById('reg-name').value) return showToast("Name required");
            if(index === 3 && !document.getElementById('reg-nic').value) return showToast("NIC required");
            if(index === 4 && !window.appState.capturedImage) return showToast("Capture Profile");

            const track = document.getElementById('reg-track');
            track.style.transform = `translateX(-${index * 20}%)`;
            const fill = document.getElementById('reg-progress');
            fill.style.width = `${((index + 1) / 5) * 100}%`;
        };

        function populateProvinces() {
            const sel = document.getElementById('reg-province');
            for(let p in sriLankaData) { const opt = document.createElement('option'); opt.value = p; opt.innerText = p; sel.appendChild(opt); }
        }
        window.loadDistricts = () => {
            const pVal = document.getElementById('reg-province').value;
            const dSel = document.getElementById('reg-district');
            dSel.innerHTML = "";
            if(sriLankaData[pVal]) { sriLankaData[pVal].forEach(d => { const opt = document.createElement('option'); opt.value = d; opt.innerText = d; dSel.appendChild(opt); }); }
        };

        window.openCamera = async () => {
            const video = document.getElementById('camera-video');
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                video.srcObject = stream;
                document.getElementById('camera-popup').classList.remove('hidden');
                window.appState.isCameraOpen = true;
            } catch(e) { showToast("Camera Access Denied"); }
        };

        window.captureImage = () => {
            const video = document.getElementById('camera-video');
            const canvas = document.createElement('canvas');
            const size = Math.min(video.videoWidth, video.videoHeight);
            canvas.width = 300; canvas.height = 300;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, (video.videoWidth - size)/2, (video.videoHeight - size)/2, size, size, 0, 0, 300, 300);
            
            const rawBase64 = canvas.toDataURL('image/jpeg', 0.6);
            
            // Apply compression to get ~20KB
            compressBase64(rawBase64).then((compressed) => {
                window.appState.capturedImage = compressed;
                const preview = document.getElementById('profile-preview-area');
                preview.innerHTML = `<img src="${window.appState.capturedImage}">`;
                
                document.getElementById('camera-popup').classList.add('hidden');
                const stream = video.srcObject; if(stream) stream.getTracks().forEach(t => t.stop());
                window.appState.isCameraOpen = false;
            });
        };

        // --- IMAGE COMPRESSION HELPER ---
        function compressBase64(base64Str) {
            return new Promise((resolve) => {
                const img = new Image();
                img.src = base64Str;
                img.onload = () => {
                    let width = img.width;
                    let height = img.height;
                    const maxWidth = 500; // Resize first to reasonable max
                    if (width > maxWidth) {
                        height *= maxWidth / width;
                        width = maxWidth;
                    }
                    const canvas = document.createElement('canvas');
                    canvas.width = width;
                    canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);

                    let quality = 0.7;
                    let dataUrl = canvas.toDataURL('image/jpeg', quality);

                    // Aggressive loop to get under ~25k characters (approx 20KB binary)
                    while (dataUrl.length > 30000 && quality > 0.1) {
                        quality -= 0.1;
                        dataUrl = canvas.toDataURL('image/jpeg', quality);
                    }
                    resolve(dataUrl);
                };
            });
        }

        function setupSlider() {
            const track = document.getElementById('slider-track');
            const thumb = document.getElementById('slider-thumb');
            let isDragging = false;
            const startDrag = (e) => { isDragging = true; e.preventDefault(); };
            const moveDrag = (e) => {
                if(!isDragging) return;
                const rect = track.getBoundingClientRect();
                let clientX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
                let x = clientX - rect.left - 23;
                const maxX = rect.width - 51;
                if(x < 0) x = 0; if(x > maxX) x = maxX;
                thumb.style.left = (x + 5) + 'px';
                if(x > maxX - 10) { finishRegistration(); isDragging = false; }
            };
            const endDrag = () => { isDragging = false; thumb.style.left = '5px'; };
            thumb.addEventListener('mousedown', startDrag); thumb.addEventListener('touchstart', startDrag);
            document.addEventListener('mousemove', moveDrag); document.addEventListener('touchmove', moveDrag);
            document.addEventListener('mouseup', endDrag); document.addEventListener('touchend', endDrag);
        }

        async function finishRegistration() {
            const track = document.getElementById('slider-track');
            track.classList.add('unlocked');
            const name = document.getElementById('reg-name').value.toUpperCase();
            const address = document.getElementById('reg-address').value;
            const province = document.getElementById('reg-province').value;
            const district = document.getElementById('reg-district').value;
            const nic = document.getElementById('reg-nic').value;
            const email = document.getElementById('reg-email').value || "";

            try {
                // Image is already compressed and stored in window.appState.capturedImage
                const userData = {
                    phone: window.appState.userPhone, fullName: name, address: address, province: province,
                    district: district, nic: nic, email: email, profileImage: window.appState.capturedImage,
                    status: 'approved', registeredAt: Date.now()
                };

                await set(ref(db, 'users/' + window.appState.userPhone), userData);
                showToast(translations[window.currentLang].registration_successful);
                localStorage.setItem('speedo_user_id', window.appState.userPhone);
                setTimeout(() => { window.location.href = 'main.html'; }, 1000);

            } catch(e) {
                showToast(translations[window.currentLang].registration_failed);
                track.classList.remove('unlocked');
            }
        }

        window.sendSms = async (recipient, otp) => {
            try {
                await fetch("https://app.text.lk/api/v3/sms/send", {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer 2975|Wz0ile7QSbXVtBMEfs3qrJcFHiz74DOnCkgfnJni36b0e4bc`, 'Content-Type': 'application/json' },
                    body: JSON.stringify({ recipient: recipient, sender_id: "TextLKDemo", type: "plain", message: `Your SPEEDO verification code is ${otp}.` })
                });
                localStorage.setItem('speedo_otp_ts', Date.now().toString());
                showToast(translations[window.currentLang].otp_sent_success);
            } catch(e) { console.error(e); }
        };

        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast'; t.innerText = msg;
            document.getElementById('toast-container').appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }
        
        function setupInputs() {
            const allOtps = document.querySelectorAll('.otp-box');
            allOtps.forEach((inp, idx) => {
                inp.addEventListener('keydown', (e) => { if(e.key === 'Backspace' && !inp.value && idx > 0) allOtps[idx-1].focus(); });
            });
        }
    </script>
</body>
</html>
